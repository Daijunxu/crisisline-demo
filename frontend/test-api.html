<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>API Connection Test</h1>
    <div id="results"></div>

    <script>
        const API_BASE = window.location.hostname === 'localhost' 
            ? 'http://localhost:8000/api'  
            : '/api';
        
        async function testAPI() {
            const results = document.getElementById('results');
            results.innerHTML = `<p>Testing API_BASE: ${API_BASE}</p>`;
            
            try {
                // Test root endpoint
                const rootResponse = await axios.get(API_BASE.replace('/api', ''));
                results.innerHTML += `<p>✅ Root endpoint: ${JSON.stringify(rootResponse.data)}</p>`;
            } catch (error) {
                results.innerHTML += `<p>❌ Root endpoint error: ${error.message}</p>`;
            }
            
            try {
                // Test analytics endpoint
                const analyticsResponse = await axios.get(`${API_BASE}/analytics`);
                results.innerHTML += `<p>✅ Analytics endpoint: ${JSON.stringify(analyticsResponse.data)}</p>`;
            } catch (error) {
                results.innerHTML += `<p>❌ Analytics endpoint error: ${error.message}</p>`;
            }
            
            try {
                // Test calls endpoint
                const callsResponse = await axios.get(`${API_BASE}/calls`);
                results.innerHTML += `<p>✅ Calls endpoint: Found ${callsResponse.data.calls.length} calls</p>`;
            } catch (error) {
                results.innerHTML += `<p>❌ Calls endpoint error: ${error.message}</p>`;
            }
        }
        
        testAPI();
    </script>
</body>
</html>
